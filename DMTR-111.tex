\documentclass[DM,lsstdraft,STR,toc]{lsstdoc}
\usepackage{geometry}
\usepackage{longtable,booktabs}

\input meta.tex

\providecommand{\tightlist}{
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

\begin{document}

\def\milestoneName{Lvv-p15} 
\def\milestoneId{LVV-P15}
\def\product{Science Pipelines SW}

\setDocCompact{true}

\title[\milestoneId{}~Test Report]{\milestoneId{} (\milestoneName{})~Test Plan and Report}
\setDocRef{\lsstDocType-\lsstDocNum}
\setDocDate{\vcsdate}
\setDocUpstreamLocation{\url{https://github.com/lsst/lsst-texmf/examples}}
\author{ John Swinbank }

\input history_and_info.tex


\setDocAbstract{
This is the test plan and report for \milestoneId{} (\milestoneName{}), an LSST DM level 1 milestone pertaining to the \product{}.
}


\maketitle

\section{Introduction}
\label{sect:intro}

\subsection{Objectives}
\label{sect:objectives}

This test plan checks for the successful release of the Fall 2018
release of the LSST Science Pipelines (Pipelines release version
17.0).\\[2\baselineskip]It will demonstrate that:\\[2\baselineskip]

\begin{itemize}
\tightlist
\item
  The release has been tagged, build and made available through standard
  distribution channels;
\item
  Release documentation, including release notes and a characterization
  report, are available on the LSST Pipelines documentation website
  (https://pipelines.lsst.io/);
\item
  An end-user can follow standard instructions to install the release
  onto some representative system;
\item
  The release is installed into the ``shared stack'' on the lsst-dev
  shared developer systems and the Verification Cluster at the LSST Data
  Facility;
\item
  That lsst\_dm\_stack\_demo test package executes successfully in the
  context of the release.
\end{itemize}

\textbf{Scope}\\[2\baselineskip]The overall strategy for testing and
verification within LSST Data Management is described in \citeds{LDM-503}.\\
This test plan specifically tests the milestone LDM-503-09a, which
refers to the Fall 2018 release of the LSST Science Pipelines.


\subsection{System Overview}
\label{sect:systemoverview}

The LSST Science Pipelines comprise the scientific algorithms which will
be used to process LSST data, arranged into executable pipelines by
means of the LSST ``task'' framework. They also include execution
middleware which is common across execution environment (for example,
the ``Data Butler'' I/O abstraction is included, but schedulers or
workflow management for specific clusters is not), and ``camera
packages'' which adapt and configure the algorithms for use with
specific instrumentation.\\[2\baselineskip]\textbf{Applicable
Documents\\
}\\
\citeds{LDM-503} Data Management Test Plan\\
\citeds{LDM-151} Data Management Science Pipelines Design\\
LSE-61 Data Management System Requirements


\subsection{References}
\label{sect:references}

\renewcommand{\refname}{}
\bibliography{lsst,refs,books,refs_ads}

\subsection{Document Overview}
\label{sect:docoverview}

The following planning sections are completed before the start of the test activity.
Section \ref{sect:configuration} of this document provides details of the \product{} baseline used for this test, including relevant hardware and software configurations.
Section \ref{sect:personnel} lists the individuals involved in performing the tests.
Section \ref{sect:plannedtestactivities} provides a descriptive list of planned test cases.
Once the above sections are completed, this document can be reviewd in order to ensure that the test activity can start.

Section \ref{sect:testresults} is filled after the test activity is completed.
Its includes  an overview of the resulta in \ref{sect:overview}
while \ref{sect:detailedtestresults} provides more detailed results from each individual test case.

\newpage
\section{Test Configuration}
\label{sect:configuration}

Observing is not required for this test campaign.


\subsection{Verification Environment}
\label{sect:hwconf}
Several of the tests described in this plan are agnostic of environment:
they involve checking that certain content has been properly published.
This can be performed from any internet-connected system with a web
browser, and will, in this case, likely be executed from the tester's
laptop.\\[2\baselineskip]Where tests require installation or execution
of specific Science Pipelines components, this will be carried out on
the ``lsst-dev'' shared developer infrastructure at the LSST Data
Facility. This infrastructure provides a number of powerful (high core
count, high RAM) systems accessible to LSST developers. At time of
writing, they are running CentOS 7.5.1804; in practice, any version of
CentOS (or a similar operating system) is appropriate for this test
plan, as long as it complies with the published installation
prerequisites of the LSST pipelines.\\[2\baselineskip]





\newpage
\section{Personnel}
\label{sect:personnel}

Following personnel is involved in the test activity:

\begin{itemize}
\item Test Plan (LVV-P15) owner: John Swinbank (swinbank)
\item Test Cycles:
\begin{itemize}
  \item LVV-C18: John Swinbank (swinbank)
  \begin{itemize}
    \item Test case LVV-T362:  (swinbank)
    \item Test case LVV-T363:  (swinbank)
  \end{itemize}
\end{itemize}
\item Additional Test Personel involved: None
\end{itemize}

\newpage
\section{Planned Test Activities}
\label{sect:plannedtestactivities}


\subsection{Test Cycle LVV-C18}

LDM-503-09a: Science Pipelines Fall 2018 Release


This test cycle describes tests performed on the Science Pipelines Fall
2018 (v17.0) release, ensuring that the release is properly identified,
documented, distributed, installable and tested.



\subsubsection{LVV-T362}

This test will check:
\begin{itemize}
\item That the Alert Production Pipeline payload is available for installation from documented channels;
\item That the Data Release Production Pipeline payload is available for installation from documented channels;
\item That the Calibration Products Production Pipeline payload is available for installation from documented channels;
\item That these payloads can be installed on systems at the LSST Data Facility following available documentation;
\item That the installed pipeline payloads are capable of successfully executing basic integration tests.
\end{itemize}
Note that this test assumes a 2018-era packaging of the Science Pipelines software, in which all the above payloads are represented by a single “meta-package”, lsst\_distrib.

    \begin{longtable}[]{p{1.3cm}p{2cm}p{13cm}}
    %\toprule
    Step & \multicolumn{2}{@{}l}{Description} \\ \toprule
    \endhead

            \multirow{1}{*}{ 1 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
The LSST Science Pipelines, described by the lsst\_distrib meta-package, should be installed following the documentation available at https://pipelines.lsst.io/. The suggested Conda environment will be used to ensure that a supported execution environment is available.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 2 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
The lsst\_distrib top-level metapackage will be enabled. Assuming that the software has been installed at \${LSST\_DIR}:
\begin{verbatim}
       source ${LSST_DIR}/loadLSST.bash
       setup lsst_distrib
\end{verbatim}
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 3 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
The “LSST Stack Demo” package will be downloaded onto the test system from \url{https://github.com/lsst/lsst_dm_stack_demo/releases}. The version corresponding to to the version of the Science Pipelines under test should be chosen.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 4 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
The stack demo package is uncompressed into a directory \begin{verbatim}${DEMO_DIR}\end{verbatim}.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 5 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
The demo package will be executed by following the instructions in its README file. Successful execution will result in the string “Ok” being returned.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

        \\ \midrule
    \end{longtable}


\subsubsection{LVV-T363}


This test will check:
\begin{itemize}
\item That a particular Science Pipelines release is adequately described by documentation at the https://pipelines.lsst.io/ site;
\item That the Science Pipelines release is accompanied by a characterization report which describes its scientific performance.
\end{itemize}

    \begin{longtable}[]{p{1.3cm}p{2cm}p{13cm}}
    %\toprule
    Step & \multicolumn{2}{@{}l}{Description} \\ \toprule
    \endhead

            \multirow{1}{*}{ 1 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
Load the Science Pipelines website at https://pipelines.lsst.io/.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 2 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
Identify documentation for the release under test. This should be clearly labelled on the documentation site.

If the latest release is being tested, the default page loaded when visiting https://pipelines.lsst.io/ should be the documentation required.

If this test is for another release, the site should present clear instructions for changing the edition (or version) of the documentation being examined, and documentation for the release under test should be available.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 3 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
Inspect the documentation to ensure that it refers to the release under test, and that it provides:
\begin{itemize}
\item Release notes, describing changes in this release relative to the previous;
\item Installation instructions, together with a list of supported platforms and prerequisites;
\item Getting started information.
\end{itemize}
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 4 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
Locate the Characterization Metric Report corresponding to this release. It should be linked from the main release documentation.
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

            \multirow{1}{*}{ 5 } &  &
            \begin{minipage}[t]{13cm}{\footnotesize
Verify that the characterization metric report describes the scientific performance of the release in terms of metrics referring to high-level requirements documentation (the Science Requirements Document, LPM-17; the LSST System Requirements, LSE-29; and/or the Observatory System Specifications, LSE-30).
            \vspace{\dp0}
            } \end{minipage} \\ \cline{2-3}

        \\ \midrule
    \end{longtable}

\newpage

\section{Test Results}
\label{sect:testresults}

\subsection{Overview of the Test Results}
\label{sect:overview}

\subsubsection{Summary Table}
\label{sect:summarytable}


\begin{longtable} {|p{0.2\textwidth}|p{0.2\textwidth}|p{0.6\textwidth}|}
\hline
{\bf TEST CASE ID} & {\bf PASS/FAIL} & {\bf COMMENTS} \\\hline
LVV-T362 & Not Run & \\\hline
LVV-T363 & Not Run & \\\hline
\end{longtable}

\subsubsection{Overall Assessment}
\label{sect:overallassessment}


\subsubsection{Recommended Improvements}
\label{sect:recommendations}

\subsection{Detailed Test Results}
\label{sect:detailedtestresults}


\end{document}
